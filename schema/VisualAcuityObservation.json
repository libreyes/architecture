{
	"id": "VisualAcuityObservation#",
	"$schema": "http://json-schema.org/draft-04/schema#",
	"title": "Visual Acuity Observation",
	"type": "object",
	"definitions": {
		"reading": {
			"properties": {
				"eyeExamined": {
					"description": "The eye which is being examined",
					"$ref": "Coding"
				}
			},
			"required": ["eyeExamined"]
		},
		"refractionDetails": {},
		"pupillaryState": {}
	},
	"allOf": [
		{
			"$ref": "Observation"
		}
	],
	"properties": {
		"testName": {
			"description": "The name of the exact visual acuity test performed. This generally represents a broad category of applied refraction. Specific refraction details can be described using 'Refractive Correction'.",
			"oneOf": [
				{
					"$ref": "Coding"
				},
				{
					"properties": {
						"type": "string"
					}
				}
			]
		},
		"description": {
			"description": "An overall narrative description of the visual acuity test result.",
			"type": "string"
		},
		"perEye": {
			"description": "Details of the visual field test result for each eye.",
			"type": "array",
			"items": {
				"$ref": "#/definitions/reading"
			}
		},
		"overallInterpretation": {
			"description": "A term, commonly coded, expressing an overall interpretation of the visual acuity test.",
			"type": "string"
		},
		"comment": {
			"description": "Any additional narrative comment about the visual acuity test",
			"type": "string"
		},
		"confoundingFactors": {
			"description": "Patient circumstances which affect interpretation of the result. Often termed 'reliability' in opthalmological documentation.",
			"type": "string"
		},
		"refractiveCorrection": {
			"description": "The specific type(s) of refractive correction applied when measuring visual acuity.",
			"$ref": "Coding"
		},
		"refractionDetails": {
			"description": "Details of the refraction applied to each eye.",
			"type": "array",
			"maxItems": 2,
			"items": {
				"$ref": "#/definitions/refractionDetails"
			}
		},
		"pupillaryState": {
			"description": "Details of the state of the pupil on examination.",
			"type": "array",
			"maxItems": 1,
			"items": {
				"$ref": "#/definitions/pupillaryState"
			}
		},
		"testingDistance": {
			"description": "The distance at which the subject's visual acuity was measured.",
			"$ref": "Quantity"
		},
		"chartMethod": {
			"description": "The charting method used to measure visual acuity.",
			"$ref": "Coding"
		},
		"chartOptotype": {
			"description": "The style of chart optotype used to assess visual acuity.",
			"$ref": "Coding"
		},
		"chartScoringAlgorithm": {
			"description": "The alogrithm used to determine the score.",
			"$ref": "Coding"
		},
		"measurementDeviceDetails": {
			"description": "Details of the device used to measure visual acuity.",
			"$ref": "Device"
		},
		"derivedScoreOriginalNotation": {
			"description": "The original visual acuity result notation from which the Derived Score was calculated.",
			"$ref": "Coding"
		},
		"derivedScoreAlgorithm": {
			"description": "Details of the algorithm used to calculate a derived score",
			"type": "text"
		}
	}
}